# Barakah Retain Configuration File

app:
  name: "Barakah Retain"
  version: "1.0.0"
  description: "Islamic App User Retention Prediction"

data:
  raw_path: "data/raw/"
  processed_path: "data/processed/"
  model_path: "data/models/"

  simulation:
    n_users: 10000
    date_range_start: "2024-06-01"
    date_range_end: "2024-11-10"
    churn_rate: 0.30
    ramadan_start: "2024-03-11"
    ramadan_end: "2024-04-09"

features:
  engagement_features:
    - days_since_last_session
    - session_frequency_7d
    - session_frequency_30d
    - avg_session_duration
    - total_sessions
    - streak_current
    - streak_longest
    - days_since_signup
    - sessions_per_week
    - weekend_activity_ratio

  islamic_features:
    - ramadan_engagement_ratio
    - is_ramadan_convert
    - days_since_ramadan
    - last_10_nights_sessions
    - jummah_participation_rate
    - prayer_time_interaction_rate
    - eid_participation
    - muharram_participation

  content_features:
    - quran_reading_pct
    - hadith_engagement_pct
    - lecture_watch_minutes
    - fiqh_content_views
    - seerah_content_views
    - tafsir_engagement
    - topic_diversity_score
    - favorite_content_type
    - content_completion_rate
    - bookmark_count

  social_features:
    - friends_count
    - shares_sent
    - comments_made
    - days_since_last_social

model:
  algorithm: "xgboost"
  target: "is_churned"

  xgb_params:
    objective: "binary:logistic"
    eval_metric: "auc"
    max_depth: 7
    learning_rate: 0.05
    n_estimators: 200
    subsample: 0.8
    colsample_bytree: 0.8
    min_child_weight: 3
    scale_pos_weight: 3
    random_state: 42

  train_test_split:
    test_size: 0.2
    random_state: 42
    stratify: true

  imbalance_handling:
    method: "smote"
    sampling_strategy: 0.5

  target_metrics:
    accuracy: 0.85
    precision: 0.80
    recall: 0.75
    f1_score: 0.77
    roc_auc: 0.90

risk_thresholds:
  high: 0.70
  medium: 0.30
  low: 0.0

api:
  host: "0.0.0.0"
  port: 8000
  api_key_header: "X-API-Key"
  rate_limit: 1000  # requests per hour

dashboard:
  page_size: 50
  refresh_interval: 86400  # 24 hours in seconds
  cache_ttl: 3600  # 1 hour

interventions:
  high_risk:
    strategy: "post_ramadan_reengagement"
    actions:
      - "Send personalized email within 24h"
      - "Offer 7-day premium trial"
      - "Push notification with motivational content"
    expected_success_rate: 0.35

  medium_risk:
    strategy: "gentle_reminder"
    actions:
      - "Weekly progress summary email"
      - "Streak recovery notification"
    expected_success_rate: 0.25

  low_risk:
    strategy: "maintain_engagement"
    actions:
      - "Continue regular notifications"
      - "Personalized content recommendations"
    expected_success_rate: 0.90
